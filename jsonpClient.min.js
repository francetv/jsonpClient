!function(a,b,c,d){function e(){var e;return{loadScript:function(a,c){function d(a){h||(h=!0,g.parentNode.removeChild(g),c(a))}function f(){d(new Error("script load error"))}var g=b.createElement("script"),h=!1;g.addEventListener?(g.addEventListener("load",d.bind(null,null),!0),g.addEventListener("error",f,!0)):(g.onload=g.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||d()},g.onerror=f),g.async=!0,g.src=a,e||(e=b.getElementsByTagName("script")[0]),e.parentNode.insertBefore(g,e)},get:function(b,d){"string"==typeof b&&(b={url:b}),b.callback=d,"timeout"in b||(b.timeout=this._defaultTimeout),b.callbackName=b.callbackName||"_jsonp_loader_callback_request_"+this._requestsCount++,b.timeout&&(b.timeoutHandler=c(this._abortRequest.bind(this,b),b.timeout)),a[b.callbackName]=this._receiveData.bind(this,b);var e=b.url;/\{\{CALLBACK_NAME\}\}/.test(b.url)?e=e.replace("{{CALLBACK_NAME}}",b.callbackName):(~e.indexOf("?")||(e+=~e.indexOf("?")?"&":"?"),e+=(b.queryStringKey||"callback")+"="+b.callbackName),this.loadScript(e,this._scriptLoadCallback.bind(this,b))},_defaultTimeout:500,_requestsCount:0,_receiveData:function(a,b){return this._cleanup(a),a.aborted?void 0:b?void a.callback(null,b):a.callback(new Error("no data received"))},_abortRequest:function(b){b.aborted=!0,a[b.callbackName]=function(){},b.callback(new Error("jsonp request aborted"))},_scriptLoadCallback:function(a,b){b&&(this._cleanup(a),a.aborted||a.callback(b))},_cleanup:function(b){b.timeoutHandler&&(d(b.timeoutHandler),delete b.timeoutHandler);try{delete a[b.callbackName]}catch(c){a[b.callbackName]=void 0}}}}"function"==typeof define&&define.amd?define("jsonpClient",[],e):a.jsonpClient=e()}(this,this.document,this.setTimeout,this.clearTimeout);